# jv = [[-0.00827245, -1.499229787179586, 1.9832927471795863, -1.90846923, 1.52998398, -0.33086855717958663], [0.04425152, -1.5476190671795864, 2.0089312871795864, -1.80591659, 1.50564619, -0.5027455271795862], [0.09611825, -1.6014558871795863, 2.0234257471795862, -1.64790177, 1.46840896, -0.6733602871795865], [0.14344986, -1.6639972571795862, 2.013345867179586, -1.37664068, 1.4059148, -0.842753287179586], [0.18174406, -1.7158588871795866, 1.9298028671795864, -0.87459674, 1.30260712, -1.025902467179586], [0.22260736, -1.6552873671795858, 1.7013347971795865, -0.10433907, 1.21827855, -1.248962347179586], [0.28819746, -1.502108237179586, 1.472652997179586, 0.52451481, 1.26675894, -1.3659713371795865], [0.35541157, -1.3943513771795866, 1.3643233371795862, 0.83493361, 1.34086947, -1.3147206771795865], [0.41293072, -1.3294788771795858, 1.326694367179586, 0.97537745, 1.39030076, -1.1939461171795864], [0.4596364, -1.2967061571795861, 1.334327407179586, 1.00225056, 1.41182448, -1.1075676971795865], [0.49833752, -1.2778888171795861, 1.3638979971795866, 0.97258893, 1.41882201, -1.0773142771795863], [0.53206546, -1.257147537179586, 1.397767717179586, 0.93278801, 1.42456531, -1.0503192971795858], [0.56133913, -1.233655367179586, 1.4342637671795861, 0.88462862, 1.42930441, -1.0264721671795867], [0.58684608, -1.2066143871795862, 1.4714933171795863, 0.82995471, 1.43326129, -1.0054103771795866], [0.60939758, -1.175364737179586, 1.5074696771795866, 0.77070316, 1.43663465, -0.9865891371795863], [0.62988759, -1.1394937471795865, 1.5402420771795864, 0.70891677, 1.43960382, -0.9693385671795864], [0.64925395, -1.0989252471795865, 1.5680169571795863, 0.64673395, 1.44233074, -0.9529121571795862]]
# a = 0.1
# v = 0.1
# r= 0.02

import urx
import math
from math import *
import math3d as m3d
import numpy as np
import time
import plotly.graph_objects as go
import socket 
import math
import plotly.io as pio
import os
import tqdm

def ActualRobotMovement(jv,a,v,r):
    a = "a = " + str(a)
    v = "v = " + str(v)
    r = "r = " + str(r)
    filename = "F:/Codes/example1.script"
    f = open (filename, "wb")
    f.write("def movement():\n".encode("utf8"))
    f.write("  while(True):\n".encode("utf8"))
    for i in range (len(jv)):
        message = str(list(jv[i]))
        if i == len(jv)-1:
            movej = "    "+"movej"+"("+message+","+a+","+v+")"+"\n"
            movej = movej.encode("utf8")
            f.write(movej)
        else:    
            movej = "    "+"movej"+"("+message+","+a+","+v+","+r+")"+"\n"
            movej = movej.encode("utf8")
            f.write(movej)
    f.write("    halt\n".encode("utf8"))
    f.write("    end\n".encode("utf8"))
    f.write("  end\n".encode("utf8"))
    f.write("end\n".encode("utf8"))
    f.close()


    # HOST = "172.16.101.225"
    HOST = "127.0.0.1"
    PORT = 30002 # UR secondary client
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))
    f = open (filename, "rb") 
    l = f.read(1024)
    while (l):
        s.send(l)
        l = f.read(1024)
    s.close()

ActualRobotMovement([[-0.00827245, -1.499229787179586, 1.9832927471795863, -1.90846923, 1.52998398, -0.33086855717958663], [0.04425152, -1.5476190671795864, 2.0089312871795864, -1.80591659, 1.50564619, -0.5027455271795862], [0.09611825, -1.6014558871795863, 2.0234257471795862, -1.64790177, 1.46840896, -0.6733602871795865], [0.14344986, -1.6639972571795862, 2.013345867179586, -1.37664068, 1.4059148, -0.842753287179586], [0.18174406, -1.7158588871795866, 1.9298028671795864, -0.87459674, 1.30260712, -1.025902467179586], [0.22260736, -1.6552873671795858, 1.7013347971795865, -0.10433907, 1.21827855, -1.248962347179586], [0.28819746, -1.502108237179586, 1.472652997179586, 0.52451481, 1.26675894, -1.3659713371795865], [0.35541157, -1.3943513771795866, 1.3643233371795862, 0.83493361, 1.34086947, -1.3147206771795865], [0.41293072, -1.3294788771795858, 1.326694367179586, 0.97537745, 1.39030076, -1.1939461171795864], [0.4596364, -1.2967061571795861, 1.334327407179586, 1.00225056, 1.41182448, -1.1075676971795865], [0.49833752, -1.2778888171795861, 1.3638979971795866, 0.97258893, 1.41882201, -1.0773142771795863], [0.53206546, -1.257147537179586, 1.397767717179586, 0.93278801, 1.42456531, -1.0503192971795858], [0.56133913, -1.233655367179586, 1.4342637671795861, 0.88462862, 1.42930441, -1.0264721671795867], [0.58684608, -1.2066143871795862, 1.4714933171795863, 0.82995471, 1.43326129, -1.0054103771795866], [0.60939758, -1.175364737179586, 1.5074696771795866, 0.77070316, 1.43663465, -0.9865891371795863], [0.62988759, -1.1394937471795865, 1.5402420771795864, 0.70891677, 1.43960382, -0.9693385671795864], [0.64925395, -1.0989252471795865, 1.5680169571795863, 0.64673395, 1.44233074, -0.9529121571795862]],0.4,0.4,0.02)
# ActualRobotMovement([[-0.01972178,-1.1790492171795863,1.027477877179586,1.3820527,1.47352838,-0.8946759771795865],[-0.10792699,-1.2728126571795864,1.1323058871795864,1.25923211,1.43413444,-0.7373588771795863],[-0.2004992,-1.3489057971795866,1.212839807179586,1.17092807,1.40073096,-0.574171077179586],[-0.29658444,-1.4092107471795865,1.2726016571795862,1.11029739,1.37326276,-0.40797058717958645],[-0.39477707,-1.454213017179586,1.3134998571795862,1.07382059,1.35244608,-0.2405788671795861],[-0.49318585,-1.4835423471795863,1.3363651971795862,1.06017123,1.3395368,-0.07338652717958638],[-0.57305318,-1.4983629271795866,1.3618445871795863,1.0469774,1.33517359,0.1061034 ],[-0.64987497,-1.4995989271795862,1.373201087179586,1.05519025,1.3398495,0.28333883],[-0.70681586,-1.4906375171795858,1.3928544071795859,1.06266757,1.35261237,0.47117606],[-0.73118591,-1.4838479071795865,1.4513662671795862,1.02539464,1.36301741,0.56568724],[-0.74129918,-1.480079827179586,1.5302284171795861,0.94981588,1.36574095,0.55593163],[-0.75136443,-1.4699792571795864,1.602414207179586,0.87435617,1.368415,0.54623801],[-0.74659807,-1.4545258571795863,1.6875225771795863,0.77058513,1.36715323,0.5508265 ],[-0.74182065,-1.4296523271795865,1.763938787179586,0.66603634,1.36588038,0.55542904],[-0.73703241,-1.3952017671795867,1.831810397179586,0.56040465,1.36459641,0.56004553],[-0.73223358,-1.3510544471795862,1.8910541171795865,0.45365294,1.36330128,0.56467586],[-0.72742439,-1.2972231671795864,1.9414197371795865,0.34604345,1.36199495,0.56931991]],0.4,0.4,0.02)